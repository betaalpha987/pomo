<!DOCTYPE html>
<html>

<head>
  <link href="https://fonts.googleapis.com/css?family=Catamaran" rel="stylesheet">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    * {
      font-family: 'Catamaran', sans-serif;
      box-sizing: border-box;
    }

    body {
    }

    #pizza-frame {
      width: 450px;
      height: 653px;
      top: 50px;
      margin: auto;
      position:relative;
      padding:0px;
    }

    .piz { /*All pizza elements*/
      position:absolute;
      margin:0px;
      padding:0px;
    }
    .bkg { /* Dough and platter*/
      bottom:15px; left:15px;
      z-index:-1;
    }
    .t-base { /*tomato base*/
      bottom:254px; left:43px;
      z-index: 0;
    }
    .rim {
      bottom:228px; left:18px;
      z-index:1;
    }
    .c-base { /*cheese base*/
      bottom:272px; left:60px;
      z-index: 2;
    }
    .topp { /*Toppings. Empty for time being*/
    }

    .rotat {
      transform: rotate(-50deg);
      background-color: green;
    }

  </style>

</head>

<body>

  <h1>My first SVG</h1>

  <div id="pizza-frame">
    <img src="images\piz_base.svg" class="piz bkg"/>
    <img src="images\piz_base_tom.svg" class="piz t-base"/>
    <img src="images\piz_rim.svg" class="piz rim"/>
    <img src="images\piz_base_cheese.svg" class="piz c-base"/>
  </div>
<script>

const toppings = [ {name: "tomatoes", src: "piz_ing_tomato.svg"},
                   {name: "mushrooms", src: "piz_ing_mushroom.svg"},
                   {name: "basil", src: "piz_ing_basil.svg"},
                   {name: "green olives", src: "piz_ing_greenolive.svg"},
                   {name: "black olives", src: "piz_ing_blackolive.svg"}];

for (let i=0; i < 5; i++) {
  document.body.onload = addTopping(i);
}

function randPN(i) { // return a random number between -i and i
  return Math.random() * i * (Math.floor(Math.random()*2) == 1 ? 1 : -1);
}

function addTopping(tp) {
  const rings=[1,6,10]; // Toppings go on in rings from the center
  const ringSpace = 70; // Spacing between each topping ring. Also determines total radius.
  const frame = document.getElementById("pizza-frame");
  const xC = 225; const yC = 185; // Offsets, for placing toppings in the center of the pizza
  const posStagger = 20; // Max random position deviation
  const rotStagger = 50; // Max random rotation deviation

  for (let h=0; h < rings.length; h++) { // Loop once for each placement ring
    for (let i=0; i<rings[h];i++) {          // Loop once for each topping to drop in the placement ring
      const topping = document.createElement("img");
      frame.appendChild(topping);
      topping.className = "piz";
      topping.src='images\\'+toppings[tp].src;
      topping.style.zIndex = tp+5;
      topping.style.transform = 'rotate('+randPN(rotStagger)+'deg)';

      let angle = (i/rings[h])*Math.PI*2;
      let radius = h*ringSpace;
      let x = (Math.cos(angle)*radius) + xC + randPN(posStagger);
      let y = (Math.sin(angle)*radius) + yC + randPN(posStagger);

      topping.style.left=x.toString()+"px";
      topping.style.top=y.toString()+"px";
    }
  }

}

</script>

</body>
</html>
